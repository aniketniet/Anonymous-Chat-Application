(function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var GroupedSubmissionsView,HR,ref;return GroupedSubmissionsView=function(superClass){function GroupedSubmissionsView(){return GroupedSubmissionsView.__super__.constructor.apply(this,arguments)}return extend(GroupedSubmissionsView,superClass),GroupedSubmissionsView.prototype.template="grouped-submissions",GroupedSubmissionsView.prototype.className="grouped-submissions-view",GroupedSubmissionsView.prototype.initialize=function(options){var that;if(options.contest_slug&&(this.contest_slug=options.contest_slug),this.listenTo(this.collection,"reset",this.render),this.contest_slug&&"master"!==this.contest_slug&&(this.contest=HR.model("contest",{slug:this.contest_slug}),that=this,this.contest.fetch({success:function(){return that.setBreadcrumb()}})),_.isObject(this.collection.challenge))return this.listenToOnce(this.collection.challenge("reset",this.render))},GroupedSubmissionsView.prototype.events={"click .expand":"expandChallenge"},GroupedSubmissionsView.prototype.expandChallenge=function(e){var subDiv;return e.preventDefault(),(subDiv=$(e.currentTarget).parents(".table-primary").find(".table-sub")).hasClass("block")?subDiv.slideUp(200).removeClass("block").css("height: auto"):subDiv.slideDown(200).addClass("block").css("height: auto")},GroupedSubmissionsView.prototype.setBreadcrumb=function(){if("master"===this.contest_slug&&HR.appView.setBreadcrumb("global","All Submissions","/submissions"),this.contest&&"master"!==this.contest.get("slug"))return HR.appView.setBreadcrumb("global","All Contests","/contests"),HR.appView.setBreadcrumb("contest",this.contest.get("name"),"/contests/"+this.contest.get("slug")+"/challenges")},GroupedSubmissionsView.prototype.render=function(){var bread_crumbs_view;return this.setBreadcrumb(),$(this.el).html(HR.appController.template(this.template,this)({collection:this.collection})),bread_crumbs_view=HR.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(bread_crumbs_view),HR.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL()+"grouped/page/",this.collection.getCurrentPage(),null,this.collection.limit),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),_.each(this.collection.models,function(model){var _view;return _view=new HR.GroupedSubmissionsListView({model:model}),this.$(".submissions-list-wrapper").append(_view.render().el),this.add_subview(_view)},this)):this.$(".submissions-list-wrapper").append(HR.appController.viewLoader(64))),this},GroupedSubmissionsView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).GroupedSubmissionsView=GroupedSubmissionsView})}).call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var GroupedSubmissionsListView,HR,ref;return GroupedSubmissionsListView=function(superClass){function GroupedSubmissionsListView(){return GroupedSubmissionsListView.__super__.constructor.apply(this,arguments)}return extend(GroupedSubmissionsListView,superClass),GroupedSubmissionsListView.prototype.template="grouped-submissions-list",GroupedSubmissionsListView.prototype.className="grouped-submissions-list-view",GroupedSubmissionsListView.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},GroupedSubmissionsListView.prototype.render=function(){var firstSubmission,submissions;return this.model.get("challenge")&&(firstSubmission=(submissions=this.model.get("submissions"))[0],submissions=submissions.slice(1),$(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),firstSubmission:firstSubmission,challenge:this.model.challenge,submissions:submissions,ns:this.model.ns()}))),this.delegateEvents(),this},GroupedSubmissionsListView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).GroupedSubmissionsListView=GroupedSubmissionsListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionsView,ref;return SubmissionsView=function(superClass){function SubmissionsView(){return SubmissionsView.__super__.constructor.apply(this,arguments)}return extend(SubmissionsView,superClass),SubmissionsView.prototype.template="submissions",SubmissionsView.prototype.className="submissions-view container",SubmissionsView.prototype.initialize=function(options){if(this.listenTo(this.collection,"reset",this.render),options.challenge&&(this.challenge=options.challenge),_.isObject(this.collection.challenge))return this.listenTo(this.collection.challenge,"reset",this.render)},SubmissionsView.prototype.render=function(){var i,len,models,ref;if(null!=this._subviews)for(i=0,len=(ref=this._subviews).length;i<len;i++)ref[i].destroy(),null;return $(this.el).html(HR.appController.template(this.template,this)({collection:this.collection,challenge:this.collection.challenge,baseURL:this.collection.challenge.pageURL()})),this.bread_crumbs_view||(this.bread_crumbs_view=HR.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(this.bread_crumbs_view)),HR.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL(),this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.$(".submissions-list-wrapper").html(""),models=_.sortBy(this.collection.models,function(model){return-1*model.get("created_at")}),_.each(models,function(model){var _view;return _view=new HR.SubmissionsListView({model:model,challenge:this.collection.challenge}),this.$(".submissions-list-wrapper").append(_view.render().el),this.add_subview(_view)},this)),this},SubmissionsView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionsView=SubmissionsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionsListView,ref;return SubmissionsListView=function(superClass){function SubmissionsListView(){return SubmissionsListView.__super__.constructor.apply(this,arguments)}return extend(SubmissionsListView,superClass),SubmissionsListView.prototype.template="submissions-list",SubmissionsListView.prototype.className="submissions-list-view",SubmissionsListView.prototype.initialize=function(options){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render),this.challenge=options.challenge},SubmissionsListView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,challenge:this.challenge})),this.delegateEvents(),this},SubmissionsListView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionsListView=SubmissionsListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionListView,ref;return SubmissionListView=function(superClass){function SubmissionListView(){return SubmissionListView.__super__.constructor.apply(this,arguments)}return extend(SubmissionListView,superClass),SubmissionListView.prototype.template="submission-list",SubmissionListView.prototype.className="submission-list-view",SubmissionListView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)()),this.delegateEvents(),this},SubmissionListView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionListView=SubmissionListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChronologicalSubmissionsView,HR,ref;return ChronologicalSubmissionsView=function(superClass){function ChronologicalSubmissionsView(){return ChronologicalSubmissionsView.__super__.constructor.apply(this,arguments)}return extend(ChronologicalSubmissionsView,superClass),ChronologicalSubmissionsView.prototype.template="chronological-submissions",ChronologicalSubmissionsView.prototype.className="chronological-submissions-view",ChronologicalSubmissionsView.prototype.initialize=function(options){var that;if(options.contest_slug&&(this.contest_slug=options.contest_slug),this.listenTo(this.collection,"reset",this.render),this.contest_slug&&"master"!==this.contest_slug&&(this.contest=HR.model("contest",{slug:this.contest_slug}),that=this,this.contest.fetch({success:function(){return that.setBreadcrumb()}})),_.isObject(this.collection.challenge))return this.listenToOnce(this.collection.challenge("reset",this.render))},ChronologicalSubmissionsView.prototype.setBreadcrumb=function(){if("master"===this.contest_slug&&HR.appView.setBreadcrumb("global","All Submissions","/submissions"),this.contest&&"master"!==this.contest.get("slug"))return HR.appView.setBreadcrumb("global","All Contests","/contests"),HR.appView.setBreadcrumb("contest",this.contest.get("name"),"/contests/"+this.contest.get("slug"))},ChronologicalSubmissionsView.prototype.render=function(){var bread_crumbs_view,models;return this.setBreadcrumb(),$(this.el).html(HR.appController.template(this.template,this)({collection:this.collection})),bread_crumbs_view=HR.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(bread_crumbs_view),HR.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL()+"all/page/",this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),models=_.sortBy(this.collection.models,function(model){return-1*model.get("created_at")}),_.each(models,function(model){var _view;return _view=new HR.ChronologicalSubmissionsListView({model:model}),this.$(".submissions-list-wrapper").append(_view.render().el),this.add_subview(_view)},this)):this.$(".submissions-list-wrapper").append(HR.appController.viewLoader(64))),this},ChronologicalSubmissionsView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).ChronologicalSubmissionsView=ChronologicalSubmissionsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var ChronologicalSubmissionsListView,HR,ref;return ChronologicalSubmissionsListView=function(superClass){function ChronologicalSubmissionsListView(){return ChronologicalSubmissionsListView.__super__.constructor.apply(this,arguments)}return extend(ChronologicalSubmissionsListView,superClass),ChronologicalSubmissionsListView.prototype.template="chronological-submissions-list",ChronologicalSubmissionsListView.prototype.className="chronological-submissions-list-view",ChronologicalSubmissionsListView.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},ChronologicalSubmissionsListView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,challenge:this.model.get("challenge"),ns:this.model.ns()})),this.delegateEvents(),this},ChronologicalSubmissionsListView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).ChronologicalSubmissionsListView=ChronologicalSubmissionsListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionView,ref;return SubmissionView=function(superClass){function SubmissionView(){return SubmissionView.__super__.constructor.apply(this,arguments)}return extend(SubmissionView,superClass),SubmissionView.prototype.template="submission",SubmissionView.prototype.className="submission-individual-view container",SubmissionView.prototype.events={"click .copy_to_clipboard":"CopyToClipBoard"},SubmissionView.prototype.initialize=function(options){return this.contest=options.contest,this.challenge=options.challenge,this.has_template=!1,this.timeout=1e3,this.model&&this.listenTo(this.model,"reset",this.render),this.render()},SubmissionView.prototype.setSubmissionModel=function(model){return this.model=model,this.listenTo(this.model,"reset",this.render),this.renderCurrentView()},SubmissionView.prototype.setGameSetCollection=function(collection){return this.collection=collection,this.listenTo(this.collection,"reset",this.render),this.renderCurrentView()},SubmissionView.prototype.render=function(){return this.has_template?this.renderCurrentView():(this.has_template=!0,this._template=this.template,this.renderCurrentView()),this},SubmissionView.prototype.getLineStart=function(){var language,skeliton_head;return(language=this.model.get("language"))?(skeliton_head=this.challenge.get(language+"_skeliton_head"),language&&skeliton_head?skeliton_head.split("\n").length+1:1):1},SubmissionView.prototype.renderCurrentView=function(){var $code_area,editorOptions,showBusyThrobber,that,_this;return this._template&&this.model.sync_status?($(this.el).html(HR.appController.template(this._template,this)({model:this.model.toJSON(),_model:this.model,contest:this.contest.toJSON()})),this.$("#submission-code").length>0&&"design"!==this.model.get("kind")&&($code_area=this.$("#submission-code").get(0),editorOptions={lineNumbers:!0,firstLineNumber:this.getLineStart(),lineWrapping:!0,matchBrackets:!0,mode:lang_mime_mapping[this.model.get("language")],indentUnit:4,readOnly:!0,value:this.model.get("code")},HR.appController.loadCodeMirrorMode(this.model.get("language"),(_this=this,function(){return _this.editor=CodeMirror($code_area,editorOptions)}))),this.renderSubViews(),"design"===this.model.get("kind")&&this.renderDesignResultsImages()):(this._ThrobberTimer&&window.clearTimeout(this._ThrobberTimer),this.model.get("slug")||(that=this,showBusyThrobber=function(index){var messages;if(null==index&&(index=0),messages=["fetching your submission","analysing statistics","generating report"],that.$(".gray").length>0)return that.$(".gray .msg").html(messages[index%messages.length]),that._ThrobberTimer=setTimeout(function(){return showBusyThrobber(index+1)},1500)},this._ThrobberTimer=setTimeout(function(){return showBusyThrobber()},500))),this},SubmissionView.prototype.renderDesignResultsImages=function(){var i,index,len,ref,testcaseMessage,testcase_messages,that,url_tags;if((null==(testcaseMessage=this.model.get("testcase_message"))[0]||null==testcaseMessage[0].image)&&this.timeout<=16e3)return that=this,this.timeoutObj=setTimeout(function(){return that.model.fetch({success:function(){return that.renderDesignResultsImages()}})},this.timeout),void(this.timeout*=2);for(url_tags="",testcase_messages=this.model.get("testcase_message"),index=i=0,len=(ref=this.model.get("testcase_status")).length;i<len;index=++i)ref[index],url_tags+="<div style='text-align: center;'><img alt='loading..' class='pjA' style='border: grey 0.5px solid;' src='https://hrc-file-uploads.s3.amazonaws.com/design-submission-imgs/"+testcase_messages[index].image+"'/><div class='pjB'>"+testcase_messages[index].message+"</div></div>";return""!==url_tags?this.$(".design-images").html(url_tags):this.$(".design-images .mesg").html("Generating test case images...")},SubmissionView.prototype.renderSubViews=function(){var current_played,percent,that,total_games;return this.model&&!0!==this.model.sync_status?this:(this.$(".apply-blob")&&(this.apply_blob_view?(this.apply_blob_view.setElement(this.$(".apply-blob")),this.add_subview(this.apply_blob_view)):this.apply_blob_view=new HR.ViewShiv({view:"apply-blob",model:this.model,el:this.$(".apply-blob")}),this.apply_blob_view.render()),total_games=this.model.get("game_total"),current_played=this.model.get("game_played"),percent=0,0!==this.model.get("status_code")&&(percent+=10),total_games>0&&(percent+=current_played/(1*total_games)*90),that=this,100===percent&&setTimeout(function(){return $(".progress-bar").next().fadeOut(),$(".progress-bar").fadeOut(),that.model.set("startLock",!0)},2e3),this.stats||(this.stats=new HR.SubmissionStatsView({parent:this})),this.stats.setModel(this.model),"game"===this.model.get("kind")&&this.collection&&this.collection.sync_status&&(this.gameset||(this.gameset=new HR.SubmissionGameCollectionView({parent:this,model:this.model,collection:this.collection})),this.manualgameplay||(this.manualgameplay=new HR.SubmissionManualGamePlayView({contest:this.contest,parent:this})),this.manualgameplay.setModel(this.model),this.manualgameplay.setGameSetCollection(this.collection),this.assign({"#submission-manual-game-play-wrapper":this.manualgameplay,"#submission-game-set-wrapper":this.gameset})),this.assign({"#submission-stats-wrapper":this.stats}),this.contest.get("has_codesprint_reg_page")&&(this.friendsLeaderboard||(this.friendsLeaderboard=new HR.FriendsLeaderboardView({challenge:this.challenge,contest:this.contest})),this.assign({"#js-friends-leaderboard":this.friendsLeaderboard})),this.delegateEvents(),this)},SubmissionView.prototype.renderManualGamePlay=function(){return this},SubmissionView.prototype.CopyToClipBoard=function(e){return e.preventDefault(),HR.router.navigate(this.challenge.pageURL()+"/copy-from/"+this.model.get("id"),!0)},SubmissionView.prototype.remove=function(){return null!=this.timeoutObj&&clearTimeout(this.timeoutObj),SubmissionView.__super__.remove.call(this)},SubmissionView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionView=SubmissionView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionStatsView,ref;return SubmissionStatsView=function(superClass){function SubmissionStatsView(){return SubmissionStatsView.__super__.constructor.apply(this,arguments)}return extend(SubmissionStatsView,superClass),SubmissionStatsView.prototype.template="submission-stats",SubmissionStatsView.prototype.className="submission-stats-view",SubmissionStatsView.prototype.events={"click a.js-download-test-case":"promptDialog"},SubmissionStatsView.prototype.initialize=function(options){return $(document).on("click",".change-filter",null,this.updateSelect),this.parent=options.parent,this.hide_score=options.hide_score||!1,this.enable_theatrics=options.enable_theatrics||!1,this.in_challenge_view=options.in_challenge_view||!1,this.time_factor=1,this.revealed_count=0,this.render()},SubmissionStatsView.prototype.setModel=function(model){return this.model&&(this.model.unbind("change"),this.model.unbind("render")),this.model=model,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"render",this.render),this.render()},SubmissionStatsView.prototype.updateSelect=function(e){var src;return e.preventDefault(),src=$(e.target),$("#selected-filter span.select").html(src.text())},SubmissionStatsView.prototype.render=function(){var all_processed,is_admin,live_status_limit,that;if(this.model)return 0===this.model.get("game_total")&&this.model.set("percent",0),that=this,live_status_limit=this.liveStatusLimit(),(all_processed=that.allProcessed(live_status_limit))&&this.model.markTestCaseRevelationDone(),is_admin=HR.profile().get("is_admin"),HR.requires(["compound/game-views"],function(){var custom_player,data,init;if(custom_player=HR.GameView.prototype.custom_player_count(),$(that.el).html(HR.appController.template(that.template,that)({model:that.model.toJSON(),score_factor:that.parent.challenge.get("factor"),singlePlayer:!!custom_player[that.model.get("codechecker_handle")],hide_score:that.hide_score,checker_processed:that.model.checker_processed(),display_status:that.displayStatus(live_status_limit),live_status:that.model.live_status,live_status_limit:live_status_limit,enable_theatrics:that.enable_theatrics,all_processed:all_processed,test_case_string:that.freeTestCaseString(live_status_limit),total_test_case_count:that.totalTestCaseCount(),is_admin:is_admin})),"game"===that.model.get("kind")){switch(data=[{id:0,text:"All "+that.model.get("game_played")+" Games Played",slug:"all"},{id:1,text:that.model.get("game_won")+" Games Won",slug:"won"},{id:2,text:that.model.get("game_lost")+" Games Lost",slug:"lost"},{id:3,text:that.model.get("game_mid_range")+" Games Tied",slug:"tied"}],init=0,that.model.get("filter")){case"won":init=1;break;case"lost":init=2;break;case"tied":init=3}return $("#submissions-filter").select2({data:data,width:"off"}),$("#submissions-filter").select2("data",data[init]),$("#submissions-filter").bind("change",function(){return Backbone.history.navigate(HR.appController.get_current_contest_namespace()+"/challenges/"+that.parent.model.get("challenge_slug")+"/submissions/game/"+that.model.get("id")+"/"+$("#submissions-filter").select2("data").slug,!0)})}}),this.checkRemaining(live_status_limit),this.scrollToFocus(),this.delegateEvents(),this},SubmissionStatsView.prototype.promptDialog=function(e){var _model,testcaseIndex,that,url;return e.preventDefault(),testcaseIndex=$(e.currentTarget).attr("testcase-num"),that=this,_model=this.model.toJSON(),url="/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+testcaseIndex+"/permission",this.enable_theatrics&&(url+="?submission_id="+this.model.get("id")),$.ajax({url:url,type:"GET",success:function(data){return!0===data.permission?that.renderDownloadTestCase(testcaseIndex):!1===data.permission?that.renderPurchaseTestCase(testcaseIndex,data.cost):void 0}})},SubmissionStatsView.prototype.renderPurchaseTestCase=function(index,cost){var _model,data,dialog_options,hacko_cost,that,_this;return null==cost&&(cost=null),that=this,_model=this.model.toJSON(),data={},this.enable_theatrics&&(data.submission_id=this.model.get("id")),hacko_cost=null!==cost?0===cost?"free":cost+" hackos":"5 hackos",dialog_options={title:"Purchase TestCase",body:"<center><p> Do you wish to purchase test case #"+index+" of "+_model.name+" for "+hacko_cost+"?</p> <p class='block-center'><a href='#' class='btn btn-primary js-buy-test-case' data-analytics='Confirm Purchase Testcase'>Yes</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-dont-buy' data-analytics='Cancel Purchase Testcase'>No</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-buy-test-case":(_this=this,function(e){var current_text;if(e.preventDefault(),"disabled"!==$(e.currentTarget).attr("disabled"))return current_text=$(e.currentTarget).html(),$(e.currentTarget).html("Buying testcases..."),$(e.currentTarget).attr("disabled","disabled"),that=_this,$.ajax({url:"/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+index+"/purchase",type:"POST",data:data,beforeSend:function(xhr){return xhr.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},success:function(data){return that.dialog.destroy(),that.renderDownloadTestCase(index),HR.profile().set("hacko_amount",data.hacko_amount)},error:function(){return $(".alert.error").show().html("Insufficient Hackos"),$(e.currentTarget).html(current_text),$(e.currentTarget).removeAttr("disabled")}})}),"click a.js-dont-buy":function(_this){return function(e){return e.preventDefault(),_this.dialog.destroy()}}(this)}},this.dialog=new HR.util.ShowDialog(dialog_options),this.dialog.render()},SubmissionStatsView.prototype.renderDownloadTestCase=function(index){var _model,dialog_options,that;return that=this,_model=this.model.toJSON(),dialog_options={title:"Download TestCase #"+index,body:"<center><p> Download Test Case #"+index+" of "+_model.name+"</p> <p class='block-center'><a href='#' class='btn btn-primary js-download-test-case' command='testcaseinput' data-analytics='Download Input'>Input</a>&nbsp;&nbsp;&nbsp; <a href='#' class='btn btn-primary js-download-test-case' command='testcaseoutput' data-analytics='Download Output'>Expected Output</a></p> <div class='formgroup clearfix m'> <div class='alert error hide'></div> </div>",events:{"click a.js-download-test-case":function(e){var command;return command=$(e.target).attr("command"),e.preventDefault(),window.open("/rest/contests/"+that.contestSlug()+"/testcases/"+_model.challenge_id+"/"+index+"/"+command,"_blank")}}},this.dialog=new HR.util.ShowDialog(dialog_options),this.dialog.render()},SubmissionStatsView.prototype.contestSlug=function(){return this.model.get("contest_slug")},SubmissionStatsView.prototype.displayStatus=function(live_status_limit){return this.enable_theatrics?this.allProcessed(live_status_limit)?this.model.get("status"):this.model.get("status").startsWith("Running")||this.model.checker_processed()?"Running testcases":this.model.get("status"):this.model.get("status")},SubmissionStatsView.prototype.liveStatusLimit=function(){return this.enable_theatrics?(this.updateRevealedCount(),this.revealed_count):this.model.totalCases()},SubmissionStatsView.prototype.recordFirstResponseTime=function(){if(!this.first_response_time)return this.first_response_time=Date.now()},SubmissionStatsView.prototype.recordCheckerProcessedTime=function(){if(!this.checker_processed_time)return this.checker_processed_time=Date.now()},SubmissionStatsView.prototype.checkRemaining=function(live_status_limit){if(live_status_limit<this.model.totalCases()){if(!this.enable_theatrics||this.canStartTestCaseDisplay())return setTimeout((_this=this,function(){return _this.render()}),1e3*this.time_factor)}else if(this.model.score_processed()&&this.model.checker_processed())return this.model.trigger("animateScores");var _this},SubmissionStatsView.prototype.updateRevealedCount=function(){return _.throttle((_this=this,function(){var drip_count,new_revelations;if(drip_count=_this.model.totalCases()/8,_this.canStartTestCaseDisplay())return(new_revelations=Math.round(Math.random()*drip_count+1))<1&&(new_revelations=1),_this.revealed_count+=new_revelations}),1e3*this.time_factor)();var _this},SubmissionStatsView.prototype.canStartTestCaseDisplay=function(){return 2===this.model.getDisplayVersion()||this.model.checker_processed()},SubmissionStatsView.prototype.allProcessed=function(live_status_limit){return this.model.checker_processed()&&this.model.score_processed()&&live_status_limit>=this.model.totalCases()},SubmissionStatsView.prototype.freeTestCaseString=function(live_status_limit){var test_case_names;return null==this.model.get("free_test_cases")?"":!this.allProcessed(live_status_limit)||this.model.get("free_test_cases").length<1?"":1===(test_case_names=this.model.get("free_test_cases").map(function(tcno){return"<a href='#' class='js-download-test-case' testcase-num='"+tcno+"'> Test Case #"+tcno+"</a>"})).length?test_case_names[0]:test_case_names.slice(0,test_case_names.length-1).join(", ")+" and "+test_case_names[test_case_names.length-1]},SubmissionStatsView.prototype.scrollToFocus=function(){var $stats_container,sample_testcases;if(this.in_challenge_view&&typeof(sample_testcases=this.model.get("is_sample_testcase"))==typeof[]&&sample_testcases.length>0&&"Queued"!==this.model.get("status")&&!this.scrolled&&($stats_container=this.$("#submission-stats-content")).length>0)return this.scrolled=!0,$("html,body").animate({scrollTop:$stats_container.offset().top},"slow")},SubmissionStatsView.prototype.adjustCss=function(){return _.throttle((_this=this,function(){var parent_width;return(parent_width=$(".right-sidebar .testcases-results").width())>750?_this.changeColumnCount(3):parent_width>500?_this.changeColumnCount(2):_this.changeColumnCount(1)}),500)();var _this},SubmissionStatsView.prototype.changeColumnCount=function(count){var $tc_results;return null==count&&(count=3),($tc_results=$(".right-sidebar .testcases-results")).css("-webkit-column-count",""+count),$tc_results.css("-moz-column-count",""+count),$tc_results.css("column-count",""+count)},SubmissionStatsView.prototype.totalTestCaseCount=function(){return this.model.checker_processed()?null!=this.model.get("testcase_status")?this.model.get("testcase_status").length:0:this.model.get("is_sample_testcase").length},SubmissionStatsView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionStatsView=SubmissionStatsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionSuccessView,ref;return SubmissionSuccessView=function(superClass){function SubmissionSuccessView(){return SubmissionSuccessView.__super__.constructor.apply(this,arguments)}return extend(SubmissionSuccessView,superClass),SubmissionSuccessView.prototype.template="submission-success",SubmissionSuccessView.prototype.className="submission-success-view",SubmissionSuccessView.prototype.initialize=function(options){return this.url_namespace=options.url_namespace,this.hacker=HR.profile(),this.loading=!1},SubmissionSuccessView.prototype.events={"click a.close":"destroy","click .close-success":"destroy"},SubmissionSuccessView.prototype.render=function(){var score,tag_count;return score=parseFloat(this.model.display_score||0).toFixed(2),this.model.final_score=score,tag_count=0,1===this.model.solved&&this.model.next_challenge_slug&&(tag_count+=1),"master"===HR.appController.get_current_contest_namespace()||""===HR.appController.get_current_contest_namespace()?this.model.random_challenge_slug&&1===this.model.solved&&(tag_count+=1):0!==HR.appController.get_current_contest_slug().indexOf("company-page-")&&(tag_count+=1),this.model.tag_count=tag_count,$(this.el).html(HR.appController.template(this.template,this)({model:this.model,share:this.shareAttributes()})),$(this.el).fadeIn(),this.delegateEvents(),this},SubmissionSuccessView.prototype.destroy=function(e){return e&&e.preventDefault&&e.preventDefault(),$(this.el).remove(),SubmissionSuccessView.__super__.destroy.call(this)},SubmissionSuccessView.prototype.shareAttributes=function(){return{url:this.getURL(),text:"I scored "+(Math.round(this.model.final_score)||0)+" points in the "+this.model.name+" challenge on HackerRank"}},SubmissionSuccessView.prototype.getURL=function(){return document.location.protocol+"//"+document.location.host+(this.url_namespace?this.url_namespace+"/challenges/"+this.model.slug+"/submissions/"+this.model.kind+"/"+this.model.id:HR.appController.get_current_contest_namespace()+"/challenges/"+this.model.slug+"/submissions/"+this.model.kind+"/"+this.model.id)},SubmissionSuccessView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionSuccessView=SubmissionSuccessView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionRecommendView,ref;return SubmissionRecommendView=function(superClass){
function SubmissionRecommendView(){return SubmissionRecommendView.__super__.constructor.apply(this,arguments)}return extend(SubmissionRecommendView,superClass),SubmissionRecommendView.prototype.template="submission-recommend",SubmissionRecommendView.prototype.className="submission-recommend-view",SubmissionRecommendView.prototype.events={"change div#contest-challenges-problem":"follow","click div#contest-challenges-problem":"clickTrack"},SubmissionRecommendView.prototype.initialize=function(options){var that;return this.model=new HR.ChallengeModel,this.show_title=options.show_title,this.title_string=options.title_string,this.challenge_slug=options.challenge_slug,this.full_width=options.full_width,this.show_transition_text=options.show_transition_text,this.next_base_level=options.next_base_level,that=this,options.next_challenge_slug&&(this.model.setSlug(options.next_challenge_slug),this.model.setTeaser(),this.model.fetch({success:function(){return that.render()}})),this},SubmissionRecommendView.prototype.render=function(){return this.model?($(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),baseURL:this.model.baseURL(),title_string:this.title_string,show_title:this.show_title,full_width:this.full_width,show_transition_text:this.show_transition_text,next_base_level:this.next_base_level})),this):this},SubmissionRecommendView.prototype.follow=function(e){var inner,out;return out=this.$(e.currentTarget),(inner=this.$(".contest-challenge-click-hover")).width(out.width()),inner.height(out.height())},SubmissionRecommendView.prototype.clickTrack=function(){return this.model.trackRecommendationClick({parent_challenge_slug:this.challenge_slug,parent_challenge_name:this.title_string,click_element:"Challenge-Inside",recommendation_type:"Post Submission"})},SubmissionRecommendView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionRecommendView=SubmissionRecommendView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionGameCollectionView,ref;return SubmissionGameCollectionView=function(superClass){function SubmissionGameCollectionView(){return SubmissionGameCollectionView.__super__.constructor.apply(this,arguments)}return extend(SubmissionGameCollectionView,superClass),SubmissionGameCollectionView.prototype.template="submission-game-collection",SubmissionGameCollectionView.prototype.className="submission-game-collection-view",SubmissionGameCollectionView.prototype.initialize=function(options){return this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render)},SubmissionGameCollectionView.prototype.events={"click .show-gameset-button":"showGameContainer"},SubmissionGameCollectionView.prototype.render=function(){return window.SubDebugListView=this,$(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),_model:this.model,collection:this.collection.toJSON(),_collection:this.collection})),this.collection.sync_status?(this.$(".throbber-row").hide(),this.$(".game-view-rows").show(),this.$(".zero-content").hide(),0===this.collection.length&&(this.model.get("filter")?this.$(".zero-content-"+this.model.get("filter")).show():this.$(".zero-content-all").show())):(this.$(".game-view-rows").hide(),this.$(".throbber-row").show()),this.setPagination(),this},SubmissionGameCollectionView.prototype.setPagination=function(){var that;return this.collection.getFilter(),HR.util.pagination(this.$(".pagination-wrapper"),this.collection.total,HR.appController.get_current_contest_namespace()+"/challenges/"+this.parent.model.get("challenge_slug")+"/submissions/game/"+this.model.get("id")+"/"+this.collection.getFilter()+"/page/",this.collection.page,null,5,10,"change-gameset"),that=this,this.$(".pagination a.change-gameset").click(function(e){var href,page;return e.preventDefault(),page=parseInt($(e.currentTarget).attr("data-page")),href=$(e.currentTarget).attr("href"),HR.router.navigate(href,!1),that.collection.page=page,that.collection.fetch({reset:!0}),that.$(".game-view-rows").hide(),that.$(".throbber-row").show()}),this},SubmissionGameCollectionView.prototype.showGameContainer=function(e){var id,that;return e.preventDefault(),this.gameContainerView&&this.gameContainerView.remove(),this.$(".show-gameset-container").html(""),this.$(".show-gameset-container").hide(),id=$(e.currentTarget).attr("data-id"),this.gameModel=this.collection.findWhere({id:id}),that=this,HR.requires(["compound/game-views"],function(){var gameCollection;return that.$(".show-gameset-container-"+id).show(),gameCollection=new HR.GameCollection(that.gameModel.get("games")),that.gameContainerView=new HR.GameContainerView({collection:gameCollection,gameset:that.gameModel}),that.$(".show-gameset-container-"+id).append(that.gameContainerView.render().el),that.add_subview(that.gameContainerView)})},SubmissionGameCollectionView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionGameCollectionView=SubmissionGameCollectionView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionGameSetListView,ref;return SubmissionGameSetListView=function(superClass){function SubmissionGameSetListView(){return SubmissionGameSetListView.__super__.constructor.apply(this,arguments)}return extend(SubmissionGameSetListView,superClass),SubmissionGameSetListView.prototype.template="submission-game-set-list",SubmissionGameSetListView.prototype.className="submission-game-set-view-list",SubmissionGameSetListView.prototype.initialize=function(options){return this.parent=options.parent,this.submission=options.submission,this._collection=new HR.GameCollection,this.has_template=!1},SubmissionGameSetListView.prototype.events={"click .play_game":"showGameContainer"},SubmissionGameSetListView.prototype.render=function(){return this.renderTemplate(),this},SubmissionGameSetListView.prototype.renderTemplate=function(){return this.has_template?this.setGameSetModel(this.model):HR.appController.getTemplate(this.template,function(template){return this._template=template,this.has_template=!0,this.setGameSetModel(this.model)},this)},SubmissionGameSetListView.prototype.compareGamesetModel=function(){return this._model&&this.model?!this._compareObjects(this._model.attributes,this.model.attributes):!(!this.model&&!this.model)},SubmissionGameSetListView.prototype._compareObjects=function(obj1,obj2){var changed;return changed=!1,obj1&&obj2?_.isArray(obj1)&&_.isArray(obj2)?_.size(obj1)===_.size(obj2)?_.each(obj1,function(_obj1){var _changed;if(_changed=!0,_.each(obj2,function(_obj2){if(this._compareObjects(_obj1,_obj2))return _changed=!1},this),!0===_changed)return changed=!0},this):changed=!0:_.isObject(obj1)&&_.isObject(obj2)?_.size(obj1)===_.size(obj2)?_.each(obj1,function(value,key){if(!this._compareObjects(obj2[key],value))return changed=!0},this):changed=!0:obj1!==obj2&&(changed=!0):(obj1||obj2)&&(changed=!0),!changed},SubmissionGameSetListView.prototype.setGameSetModel=function(model){var enable_game_play,games;if(model&&(this.model=model,(this.compareGamesetModel()||!this.has_rendered)&&(this.model&&this._template&&(this._model&&(this._model.unbind("change"),this._model.unbind("render")),this._model=this.model,this._model.bind("change",this.render,this),this._model.bind("render",this.render,this),this.has_rendered=!0,$(this.el).html(this._template()),this.players_view=new HR.SubmissionGameSetPlayersView({model:this._model,parent:this}),this.players_view.setElement($($(this.el).find(".players"))).render(),this.add_subview(this.players_view),games=this._model.get("games"),enable_game_play=!1,_.each(games,function(game){if(1===game.process_flag)return enable_game_play=!0}),enable_game_play?$(this.el).find("a.play_game").removeClass("disabled"):$(this.el).find("a.play_game").addClass("disabled")),this._model&&this._model.getGameCollection)))return this.collection=this._model.getGameCollection(),this.compareCollection()},SubmissionGameSetListView.prototype.compareCollection=function(){var previous_model_at;if(this.collection&&this.has_template)return _.each(this._collection.models,function(model){if(!this.collection.get(model.get("id")))return this._collection.remove(model)},this),previous_model_at=null,_.each(this.collection.models,function(model){var _model;return(_model=this._collection.get(model.get("id")))?_model.get("updated_at")!==model.get("updated_at")&&_model.set(model.attributes):previous_model_at?this._collection.add(model,{at:previous_model_at}):this._collection.unshift(model),previous_model_at=this._collection.indexOf(model)},this)},SubmissionGameSetListView.prototype.showGameContainer=function(e){var that;if(e.preventDefault(),!$(e.currentTarget).hasClass("disabled"))return this.game_container&&(this.game_container.remove(),this.$("div.row.container").html('<div class="submission-game-container-wrapper" style="margin-left: 18px;"></div>')),that=this,HR.requires(["compound/game-views"],function(){return that.game_container=new HR.GameContainerView({collection:that._collection,gameset:that._model}),that.game_container.setElement(that.$(".submission-game-container-wrapper")).render(),that.add_subview(that.game_container),that.parent.closeOtherGameContainersExcept(that)})},SubmissionGameSetListView.prototype.hideGameContainerExcept=function(view){if(view.model!==this._model&&this.game_container)return this.game_container.closeContainer()},SubmissionGameSetListView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionGameSetListView=SubmissionGameSetListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var SubmissionGameSetPlayersView,ref;return SubmissionGameSetPlayersView=function(superClass){function SubmissionGameSetPlayersView(){return SubmissionGameSetPlayersView.__super__.constructor.apply(this,arguments)}return extend(SubmissionGameSetPlayersView,superClass),SubmissionGameSetPlayersView.prototype.template="",SubmissionGameSetPlayersView.prototype.initialize=function(options){return this.parent=options.parent,this.model.bind("reset",this.render,this)},SubmissionGameSetPlayersView.prototype.render=function(){var _games,_model,current_hacker_id,games,hacker_ids,hackers,html,player_count;return this.model.get("actors")?(current_hacker_id=this.parent.parent.parent.model.get("hacker_id"),$(this.el).html(_.template(this.template)()),player_count=(_model=this.model.toJSON()).actors.length,games=_model.games,(_games={processed:0,pending:0,won:0,lost:0,tie:0,score_pending:0,score_processed:0}).total=games.length,_.each(games,function(game){var _actor;if(1!==game.process_flag)return _games.pending+=1,_games.score_pending+=1;if(_games.processed+=1,0===game.status?_games.score_pending+=1:_games.score_processed+=1,1===game.result){if(_actor=null,_.each(game.actors,function(actor){if(1===actor.actor)return _actor=actor}),null!==_actor)return _actor.hacker_id===current_hacker_id?_games.won+=1:_games.lost+=1}else if(2===game.result){if(_actor=null,_.each(game.actors,function(actor){if(2===actor.actor)return _actor=actor}),null!==_actor)return _actor.hacker_id===current_hacker_id?_games.won+=1:_games.lost+=1}else if(0===game.result)return _games.tie+=1}),hackers={},hacker_ids=[],_.each(_model.actors,function(actor){return hacker_ids.push(actor.hacker_id),hackers[actor.hacker_id]=actor},this),html="<style> table.stats, table.stats th, table.stats td { border: 1px solid #999; } table.stats td { padding: 5px; } table.stats { float: left; margin-right: 10px; } </style>",html+="<p class='span6 text-left submissions--game_list-players'>",_.each(hacker_ids,function(hacker_id){if(current_hacker_id!==hacker_id)return html+="<img class='avatar submissions--game_list-avatar' src='"+hackers[hacker_id].hacker_avatar+"' height='25' width='25'> <span class='username submissions--game_list-name'>"+hackers[hacker_id].hacker_username+"</span>"}),html+="</p>",html+="<p class='span6 clearfix'>",_games.pending>0?html+="<span class='process-pending'>"+_games.processed+"/"+_games.total+" games played.</span>":(html+="<span class='result'>",1===player_count?html+="Processed":_games.won>_games.lost?html+="You won the match":_games.won<_games.lost?html+="You lost the match":html+="You tied the match",html+=".</span>",_games.score_pending>0&&(html+=" <span class='score-pending'>Score evaluation pending.</span>")),html+="</p>",$(this.el).html(html),this):this},SubmissionGameSetPlayersView}(window.HR.GenericView),(null!=(ref=window.HR)?ref:{}).SubmissionGameSetPlayersView=SubmissionGameSetPlayersView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionGameContainerView,ref;return SubmissionGameContainerView=function(superClass){function SubmissionGameContainerView(){return SubmissionGameContainerView.__super__.constructor.apply(this,arguments)}return extend(SubmissionGameContainerView,superClass),SubmissionGameContainerView.prototype.template="submission-game-container",SubmissionGameContainerView.prototype.className="submission-game-container-view",SubmissionGameContainerView.prototype.initialize=function(options){return this.parent=options.parent,this.render()},SubmissionGameContainerView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)()),this.delegateEvents(),this},SubmissionGameContainerView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionGameContainerView=SubmissionGameContainerView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionManualGamePlayView,ref;return SubmissionManualGamePlayView=function(superClass){function SubmissionManualGamePlayView(){return SubmissionManualGamePlayView.__super__.constructor.apply(this,arguments)}return extend(SubmissionManualGamePlayView,superClass),SubmissionManualGamePlayView.prototype.template="submission-manual-game-play",SubmissionManualGamePlayView.prototype.className="submission-manual-game-play-view",SubmissionManualGamePlayView.prototype.initialize=function(options){return this.contest=options.contest,this.parent=options.parent},SubmissionManualGamePlayView.prototype.render=function(){return this.has_template?this.applyTemplate():HR.appController.getTemplate(this.template,function(template){return this._template=template,this.applyTemplate(),this.has_template=!0},this),this},SubmissionManualGamePlayView.prototype.applyTemplate=function(){if(!this.rendered()&&this._template&&this.model&&this.model.sync_status)return $(this.el).html(this._template({model:this.model,_model:this.model.toJSON()})),this.renderView()},SubmissionManualGamePlayView.prototype.rendered=function(){return""!==$(this.el).html()},SubmissionManualGamePlayView.prototype.renderView=function(){var that;return that=this,0!==this.$(".select2-container").length?($(this.el).html(""),this.$("#moreplayers").unbind("change"),void this.render()):(this.$("#moreplayers").select2({placeholder:"Challenge another hacker",minimumInputLength:2,ajax:{url:"/rest/contests/"+this.contest.get("slug")+"/challenges/"+this.model.get("slug")+"/hackers/autocomplete",dataType:"json",data:function(term){return{q:term,challenge_id:that.model.get("challenge_id")}},results:function(data){return data}}}),that=this,this.$("#moreplayers").change(function(e){var against;return against=$(e.currentTarget).val(),$("#loadingagainst").show(),that.$("img.spinner").show(),$.post("/rest/games/",{id:that.model.get("id"),against:against,challenge_id:that.model.get("challenge_id")},function(data){return that.contest&&that.contest.get("id")&&1!==that.contest.get("id")?HR.router.navigate("/contests/"+that.contest.get("slug")+"/challenges/"+that.parent.model.get("challenge_slug")+"/submissions/"+that.model.get("kind")+"/"+that.model.get("id")+"/page/"+data.page,!0):HR.router.navigate("/challenges/"+that.parent.model.get("challenge_slug")+"/submissions/"+that.model.get("kind")+"/"+that.model.get("id")+"/page/"+data.page,!0),that.$("img.spinner").hide(),that.model.fetch({force_fetch:!0}),that.$("#loadingagainst").hide(),that.render(),that.renderView()})}),this.delegateEvents)},SubmissionManualGamePlayView.prototype.setModel=function(model){return this.model&&(this.model.unbind("reset",this.render,this),this.model.unbind("change",this.render,this)),this.model=model,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.render()},SubmissionManualGamePlayView.prototype.setGameSetCollection=function(collection){return this.collection&&(this.collection.unbind("reset",this.render,this),this.collection.unbind("change",this.render,this)),this.collection=collection,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render),this.render()},SubmissionManualGamePlayView.prototype.playagainst=function(){},SubmissionManualGamePlayView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).SubmissionManualGamePlayView=SubmissionManualGamePlayView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,JudgeSubmissionsView,ref;return JudgeSubmissionsView=function(superClass){function JudgeSubmissionsView(){return JudgeSubmissionsView.__super__.constructor.apply(this,arguments)}return extend(JudgeSubmissionsView,superClass),JudgeSubmissionsView.prototype.template="judge-submissions",JudgeSubmissionsView.prototype.className="judge-submissions-view",JudgeSubmissionsView.prototype.initialize=function(options){if(this.team_slug=options.team_slug,this.challenge_slug=options.challenge_slug,this.contest_slug=options.contest_slug,this.listenTo(this.collection,"reset",this.render),_.isObject(this.collection.challenge))return this.listenToOnce(this.collection.challenge("reset",this.render))},JudgeSubmissionsView.prototype.render=function(){var bread_crumbs_view,models,url_add;return $(this.el).html(HR.appController.template(this.template,this)({collection:this.collection,team_slug:this.team_slug,challenge_slug:this.challenge_slug})),bread_crumbs_view=HR.util.renderBreadCrumbs(this.$("div.breadcrumbs"),this.collection.breadCrumbs()),this.add_subview(bread_crumbs_view),url_add="",this.challenge_slug&&(url_add="challenge/"+this.challenge_slug+"/"),this.team_slug&&(url_add=url_add+"team/"+this.team_slug+"/"),HR.util.pagination(this.$(".pagination-wrapper"),this.collection.getTotal(),this.collection.pageURL()+url_add,this.collection.getCurrentPage()),this.$(".submissions-list-wrapper").length>0&&(this.collection.sync_status?(this.$(".submissions-list-wrapper").html(""),models=_.sortBy(this.collection.models,function(model){return-1*model.get("created_at")}),_.each(models,function(model){var _view;return _view=new HR.JudgeSubmissionsListView({model:model,contest_slug:this.contest_slug}),this.$(".submissions-list-wrapper").append(_view.render().el),this.add_subview(_view)},this)):this.$(".submissions-list-wrapper").append(HR.appController.viewLoader(64))),this},JudgeSubmissionsView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).JudgeSubmissionsView=JudgeSubmissionsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,JudgeSubmissionsListView,ref;return JudgeSubmissionsListView=function(superClass){function JudgeSubmissionsListView(){return JudgeSubmissionsListView.__super__.constructor.apply(this,arguments)}return extend(JudgeSubmissionsListView,superClass),JudgeSubmissionsListView.prototype.template="judge-submissions-list",JudgeSubmissionsListView.prototype.className="judge-submissions-list-view",JudgeSubmissionsListView.prototype.initialize=function(options){return this.contest_slug=options.contest_slug,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},JudgeSubmissionsListView.prototype.events={"change .hr_set-status":"updateStatus"},JudgeSubmissionsListView.prototype.tooltip=function(){var i,index,len,ref,text;for(text="",index=i=0,len=(ref=this.model.get("testcase_message")).length;i<len;index=++i)text+="Testcase #"+index+": "+ref[index]+"\n";return text},JudgeSubmissionsListView.prototype.formatTime=function(minutes){return""+Math.ceil(minutes)},JudgeSubmissionsListView.prototype.updateStatus=function(e){var cbox,_this;return cbox=$(e.currentTarget),this.model.set("status_code",!0===cbox.is(":checked")?2:121),this.model.save({success:(_this=this,function(){return _this.model.collection.fetch()})})},JudgeSubmissionsListView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({tooltip:this.tooltip(),model:this.model,challenge:this.model.get("challenge"),ns:this.model.ns(),formattedTime:this.formatTime(this.model.get("time_from_start")),contest_slug:this.contest_slug})),this.delegateEvents(),this},JudgeSubmissionsListView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).JudgeSubmissionsListView=JudgeSubmissionsListView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FriendsLeaderboardView,HR,ref;return FriendsLeaderboardView=function(superClass){function FriendsLeaderboardView(){return FriendsLeaderboardView.__super__.constructor.apply(this,arguments)}return extend(FriendsLeaderboardView,superClass),FriendsLeaderboardView.prototype.template="friends-leaderboard",FriendsLeaderboardView.prototype.className="leaderboard-view container",FriendsLeaderboardView.prototype.events={"click .js-leaderboard-list-wrap":"removeOverlay"},FriendsLeaderboardView.prototype.initialize=function(options){if(null==options&&(options={}),this.contest=options.contest,this.challenge=options.challenge,this.friends_filter="friends=friends",!this.leaderboard_collection)return this.leaderboard_collection=HR.collection("leaderboard"),this.leaderboard_collection.setContestSlug(this.contest.get("slug")),this.leaderboard_collection.setChallenge(this.challenge.get("slug")),this.leaderboard_collection.setFiltersFromString(this.friends_filter),this.leaderboard_collection.cached(),this.listenTo(this.leaderboard_collection,"reset",this.render)},FriendsLeaderboardView.prototype.render=function(){return this.leaderboard_collection&&this.leaderboard_collection.sync_status&&$(this.el).html(HR.appController.template(this.template,this)({collection:this.leaderboard_collection.toJSON(),contest:this.contest.toJSON()})),this},FriendsLeaderboardView.prototype.removeOverlay=function(){return this.$(".js-leaderboard-list-wrap").removeClass("hide blur-wrap cursor"),this.$(".js-three-dots").remove(),hr_metrics.track("Click","ExpandFriendsLeaderboard")},FriendsLeaderboardView}(window.HR.GenericView),(HR=null!=(ref=window.HR)?ref:{}).FriendsLeaderboardView=FriendsLeaderboardView})}.call(this);